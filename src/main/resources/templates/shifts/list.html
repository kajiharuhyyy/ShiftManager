<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>シフト一覧</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
          crossorigin="anonymous">
</head>
<body class="bg-light">

<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h3 mb-0">シフト一覧</h1>
        <div class="d-flex gap-2">
            <a class="btn btn-outline-secondary btn-sm" th:href="@{/staffs}">
                スタッフ管理画面へ
            </a>
            <a class="btn btn-primary" th:href="@{/shifts/new}">
                ＋ 新規シフト
            </a>
        </div>
    </div>


    <div class="card shadow-sm">
        <div class="card-body p-0">

            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">シフト日</th>
                    <th scope="col">担当者</th>
                    <th scope="col">開始時間</th>
                    <th scope="col">終了時間</th>
                    <th scope="col">備考</th>
                    <th scope="col" class="text-center">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${#lists.isEmpty(shifts)}">
                    <td colspan="7" class="text-center text-muted py-4">
                        登録されているシフトはありません。
                    </td>
                </tr>

                <tr th:each="shift : ${shifts}">
                    <td th:text="${shift.id}"></td>
                    <td th:text="${#temporals.format(shift.workDate, 'yyyy/MM/dd')}"></td>
                    <td th:text="${shift.staff.name}"></td>
                    <td th:text="${#temporals.format(shift.startTime, 'HH:mm')}"></td>
                    <td th:text="${#temporals.format(shift.endTime, 'HH:mm')}"></td>
                    <td th:text="${shift.note}"></td>
                    <td class="text-center">
                        <!-- 編集ボタン -->
                        <a th:href="@{|/shifts/${shift.id}/edit|}"
                        class="btn btn-sm btn-outline-primary me-1">
                            編集
                        </a>

                        <!-- 削除ボタン（POST） -->
                        <form th:action="@{|/shifts/${shift.id}/delete|}" method="post"
                            style="display:inline;">
                            <button type="submit"
                                    class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('このシフトを削除してよろしいですか？');">
                                削除
                            </button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

</div>

</body>
</html>
